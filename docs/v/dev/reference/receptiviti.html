<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Receptiviti API — receptiviti • receptiviti</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Receptiviti API — receptiviti"><meta name="description" content="The main function to access the Receptiviti API."><meta property="og:description" content="The main function to access the Receptiviti API."><meta property="og:image" content="https://receptiviti.github.io/receptiviti-r/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">receptiviti</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/receptiviti.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/commencement_example.html">Commencement Example</a></li>
    <li><a class="dropdown-item" href="../articles/special_cases.html">Special Cases</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-versions" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Versions</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-versions"><li><a class="dropdown-item" href="https://receptiviti.github.io/receptiviti-r/">Development</a></li>
    <li><a class="dropdown-item" href="https://receptiviti.github.io/receptiviti-r/v/0.1.8/">0.1.8</a></li>
    <li><a class="dropdown-item" href="https://receptiviti.github.io/receptiviti-r/v/0.1.7/">0.1.7</a></li>
    <li><a class="dropdown-item" href="https://receptiviti.github.io/receptiviti-r/v/0.1.6/">0.1.6</a></li>
    <li><a class="dropdown-item" href="https://receptiviti.github.io/receptiviti-r/v/0.1.5/">0.1.5</a></li>
    <li><a class="dropdown-item" href="https://receptiviti.github.io/receptiviti-r/v/0.1.4/">0.1.4</a></li>
    <li><a class="dropdown-item" href="https://receptiviti.github.io/receptiviti-r/v/0.1.3/">0.1.3</a></li>
    <li><a class="dropdown-item" href="https://receptiviti.github.io/receptiviti-r/v/0.1.2/">0.1.2</a></li>
    <li><a class="dropdown-item" href="https://receptiviti.github.io/receptiviti-r/v/0.1.0/">0.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Receptiviti/receptiviti-r/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Receptiviti API</h1>
      <small class="dont-index">Source: <a href="https://github.com/Receptiviti/receptiviti-r/blob/HEAD/R/receptiviti.R" class="external-link"><code>R/receptiviti.R</code></a>, <a href="https://github.com/Receptiviti/receptiviti-r/blob/HEAD/R/receptiviti_status.R" class="external-link"><code>R/receptiviti_status.R</code></a></small>
      <div class="d-none name"><code>receptiviti.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The main function to access the <a href="https://www.receptiviti.com" class="external-link">Receptiviti</a> API.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">receptiviti</span><span class="op">(</span>text <span class="op">=</span> <span class="cn">NULL</span>, output <span class="op">=</span> <span class="cn">NULL</span>, id <span class="op">=</span> <span class="cn">NULL</span>, text_column <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id_column <span class="op">=</span> <span class="cn">NULL</span>, files <span class="op">=</span> <span class="cn">NULL</span>, dir <span class="op">=</span> <span class="cn">NULL</span>, file_type <span class="op">=</span> <span class="st">"txt"</span>,</span>
<span>  encoding <span class="op">=</span> <span class="cn">NULL</span>, return_text <span class="op">=</span> <span class="cn">FALSE</span>, context <span class="op">=</span> <span class="st">"written"</span>,</span>
<span>  custom_context <span class="op">=</span> <span class="cn">FALSE</span>, api_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"receptiviti.api_args"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>, frameworks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"receptiviti.frameworks"</span>, <span class="st">"all"</span><span class="op">)</span>,</span>
<span>  framework_prefix <span class="op">=</span> <span class="cn">TRUE</span>, as_list <span class="op">=</span> <span class="cn">FALSE</span>, bundle_size <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  bundle_byte_limit <span class="op">=</span> <span class="fl">7500000</span>, collapse_lines <span class="op">=</span> <span class="cn">FALSE</span>, retry_limit <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  clear_cache <span class="op">=</span> <span class="cn">FALSE</span>, clear_scratch_cache <span class="op">=</span> <span class="cn">TRUE</span>, request_cache <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cores <span class="op">=</span> <span class="fu">detectCores</span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>, collect_results <span class="op">=</span> <span class="cn">TRUE</span>, use_future <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  in_memory <span class="op">=</span> <span class="cn">TRUE</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span>, overwrite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  compress <span class="op">=</span> <span class="cn">FALSE</span>, make_request <span class="op">=</span> <span class="cn">TRUE</span>, text_as_paths <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cache <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"RECEPTIVITI_CACHE"</span><span class="op">)</span>, cache_overwrite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cache_format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"RECEPTIVITI_CACHE_FORMAT"</span>, <span class="st">"parquet"</span><span class="op">)</span>,</span>
<span>  key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"RECEPTIVITI_KEY"</span><span class="op">)</span>,</span>
<span>  secret <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"RECEPTIVITI_SECRET"</span><span class="op">)</span>,</span>
<span>  url <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"RECEPTIVITI_URL"</span><span class="op">)</span>,</span>
<span>  version <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"RECEPTIVITI_VERSION"</span><span class="op">)</span>,</span>
<span>  endpoint <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"RECEPTIVITI_ENDPOINT"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">receptiviti_status</span><span class="op">(</span>url <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"RECEPTIVITI_URL"</span><span class="op">)</span>,</span>
<span>  key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"RECEPTIVITI_KEY"</span><span class="op">)</span>,</span>
<span>  secret <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"RECEPTIVITI_SECRET"</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  include_headers <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-text">text<a class="anchor" aria-label="anchor" href="#arg-text"></a></dt>
<dd><p>A character vector with text to be processed, path to a directory containing files, or a vector of file paths.
If a single path to a directory, each file is collapsed to a single text. If a path to a file or files,
each line or row is treated as a separate text, unless <code>collapse_lines</code> is <code>TRUE</code> (in which case,
files will be read in as part of bundles at processing time, as is always the case when a directory).
Use <code>files</code> to more reliably enter files, or <code>dir</code> to more reliably specify a directory.</p></dd>


<dt id="arg-output">output<a class="anchor" aria-label="anchor" href="#arg-output"></a></dt>
<dd><p>Path to a <code>.csv</code> file to write results to. If this already exists, set <code>overwrite</code> to <code>TRUE</code>
to overwrite it.</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>Vector of unique IDs the same length as <code>text</code>, to be included in the results.</p></dd>


<dt id="arg-text-column-id-column">text_column, id_column<a class="anchor" aria-label="anchor" href="#arg-text-column-id-column"></a></dt>
<dd><p>Column name of text/id, if <code>text</code> is a matrix-like object, or a path to a csv file.</p></dd>


<dt id="arg-files">files<a class="anchor" aria-label="anchor" href="#arg-files"></a></dt>
<dd><p>A list of file paths, as alternate entry to <code>text</code>.</p></dd>


<dt id="arg-dir">dir<a class="anchor" aria-label="anchor" href="#arg-dir"></a></dt>
<dd><p>A directory to search for files in, as alternate entry to <code>text</code>.</p></dd>


<dt id="arg-file-type">file_type<a class="anchor" aria-label="anchor" href="#arg-file-type"></a></dt>
<dd><p>File extension to search for, if <code>text</code> is the path to a directory containing files to be read in.</p></dd>


<dt id="arg-encoding">encoding<a class="anchor" aria-label="anchor" href="#arg-encoding"></a></dt>
<dd><p>Encoding of file(s) to be read in. If not specified, this will be detected, which can fail,
resulting in mis-encoded characters; for best (and fasted) results, specify encoding.</p></dd>


<dt id="arg-return-text">return_text<a class="anchor" aria-label="anchor" href="#arg-return-text"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, <code>text</code> is included as the first column of the result.</p></dd>


<dt id="arg-context">context<a class="anchor" aria-label="anchor" href="#arg-context"></a></dt>
<dd><p>Name of the analysis context.</p></dd>


<dt id="arg-custom-context">custom_context<a class="anchor" aria-label="anchor" href="#arg-custom-context"></a></dt>
<dd><p>Name of a custom context (as listed by <code><a href="receptiviti_norming.html">receptiviti_norming</a></code>),
or <code>TRUE</code> if <code>context</code> is the name of a custom context.</p></dd>


<dt id="arg-api-args">api_args<a class="anchor" aria-label="anchor" href="#arg-api-args"></a></dt>
<dd><p>A list of additional arguments to pass to the API (e.g., <code>list(sallee_mode = "sparse")</code>). Defaults to the
<code>receptiviti.api_args</code> option. Custom norming contexts can be established with the <code><a href="receptiviti_norming.html">receptiviti_norming</a></code>
function, then referred to here with the <code>custom_context</code> argument (only available in API V2).</p></dd>


<dt id="arg-frameworks">frameworks<a class="anchor" aria-label="anchor" href="#arg-frameworks"></a></dt>
<dd><p>A vector of frameworks to include results from. Texts are always scored with all available framework –
this just specifies what to return. Defaults to <code>all</code>, to return all scored frameworks. Can be set by the
<code>receptiviti.frameworks</code> option (e.g., <code>options(receptiviti.frameworks = c("liwc", "sallee"))</code>).</p></dd>


<dt id="arg-framework-prefix">framework_prefix<a class="anchor" aria-label="anchor" href="#arg-framework-prefix"></a></dt>
<dd><p>Logical; if <code>FALSE</code>, will remove the framework prefix from column names, which may result in duplicates.
If this is not specified, and 1 framework is selected, or <code>as_list</code> is <code>TRUE</code>, will default to remove prefixes.</p></dd>


<dt id="arg-as-list">as_list<a class="anchor" aria-label="anchor" href="#arg-as-list"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, returns a list with frameworks in separate entries.</p></dd>


<dt id="arg-bundle-size">bundle_size<a class="anchor" aria-label="anchor" href="#arg-bundle-size"></a></dt>
<dd><p>Number of texts to include in each request; between 1 and 1,000.</p></dd>


<dt id="arg-bundle-byte-limit">bundle_byte_limit<a class="anchor" aria-label="anchor" href="#arg-bundle-byte-limit"></a></dt>
<dd><p>Memory limit (in bytes) of each bundle, under <code>1e7</code> (10 MB, which is the API's limit).
May need to be lower than the API's limit, depending on the system's requesting library.</p></dd>


<dt id="arg-collapse-lines">collapse_lines<a class="anchor" aria-label="anchor" href="#arg-collapse-lines"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, and <code>text</code> contains paths to files, each file is treated as a single text.</p></dd>


<dt id="arg-retry-limit">retry_limit<a class="anchor" aria-label="anchor" href="#arg-retry-limit"></a></dt>
<dd><p>Maximum number of times each request can be retried after hitting a rate limit.</p></dd>


<dt id="arg-clear-cache">clear_cache<a class="anchor" aria-label="anchor" href="#arg-clear-cache"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, will clear any existing files in the cache. Use <code>cache_overwrite</code> if
you want fresh results without clearing or disabling the cache. Use <code>cache = FALSE</code> to disable the cache.</p></dd>


<dt id="arg-clear-scratch-cache">clear_scratch_cache<a class="anchor" aria-label="anchor" href="#arg-clear-scratch-cache"></a></dt>
<dd><p>Logical; if <code>FALSE</code>, will preserve the bundles written when <code>in_memory</code> is <code>TRUE</code>, after
the request has been made.</p></dd>


<dt id="arg-request-cache">request_cache<a class="anchor" aria-label="anchor" href="#arg-request-cache"></a></dt>
<dd><p>Logical; if <code>FALSE</code>, will always make a fresh request, rather than using the response
from a previous identical request.</p></dd>


<dt id="arg-cores">cores<a class="anchor" aria-label="anchor" href="#arg-cores"></a></dt>
<dd><p>Number of CPU cores to split bundles across, if there are multiple bundles. See the Parallelization section.</p></dd>


<dt id="arg-collect-results">collect_results<a class="anchor" aria-label="anchor" href="#arg-collect-results"></a></dt>
<dd><p>Logical; if <code>FALSE</code>, will not retain bundle results in memory for return.</p></dd>


<dt id="arg-use-future">use_future<a class="anchor" aria-label="anchor" href="#arg-use-future"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, uses a <code>future</code> back-end to process bundles, in which case,
parallelization can be controlled with the <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></code> function (e.g., <code>plan("multisession")</code>
to use multiple cores); this is required to see progress bars when using multiple cores. See the Parallelization section.</p></dd>


<dt id="arg-in-memory">in_memory<a class="anchor" aria-label="anchor" href="#arg-in-memory"></a></dt>
<dd><p>Logical; if <code>FALSE</code>, will write bundles to temporary files, and only load them as they are being requested.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, will show status messages.</p></dd>


<dt id="arg-overwrite">overwrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, will overwrite an existing <code>output</code> file.</p></dd>


<dt id="arg-compress">compress<a class="anchor" aria-label="anchor" href="#arg-compress"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, will save as an <code>xz</code>-compressed file.</p></dd>


<dt id="arg-make-request">make_request<a class="anchor" aria-label="anchor" href="#arg-make-request"></a></dt>
<dd><p>Logical; if <code>FALSE</code>, a request is not made. This could be useful if you want to be sure and
load from one of the caches, but aren't sure that all results exist there; it will error out if it encounters
texts it has no other source for.</p></dd>


<dt id="arg-text-as-paths">text_as_paths<a class="anchor" aria-label="anchor" href="#arg-text-as-paths"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, ensures <code>text</code> is treated as a vector of file paths. Otherwise, this will be
determined if there are no <code>NA</code>s in <code>text</code> and every entry is under 500 characters long.</p></dd>


<dt id="arg-cache">cache<a class="anchor" aria-label="anchor" href="#arg-cache"></a></dt>
<dd><p>Path to a directory in which to save unique results for reuse; defaults to
<code>Sys.getenv(</code><code>"RECEPTIVITI_CACHE")</code>. See the Cache section for details.</p></dd>


<dt id="arg-cache-overwrite">cache_overwrite<a class="anchor" aria-label="anchor" href="#arg-cache-overwrite"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, will write results to the cache without reading from it. This could be used
if you want fresh results to be cached without clearing the cache.</p></dd>


<dt id="arg-cache-format">cache_format<a class="anchor" aria-label="anchor" href="#arg-cache-format"></a></dt>
<dd><p>Format of the cache database; see <code><a href="https://arrow.apache.org/docs/r/reference/FileFormat.html" class="external-link">FileFormat</a></code>.
Defaults to <code>Sys.getenv(</code><code>"RECEPTIVITI_CACHE_FORMAT")</code>.</p></dd>


<dt id="arg-key">key<a class="anchor" aria-label="anchor" href="#arg-key"></a></dt>
<dd><p>API Key; defaults to <code>Sys.getenv("RECEPTIVITI_KEY")</code>.</p></dd>


<dt id="arg-secret">secret<a class="anchor" aria-label="anchor" href="#arg-secret"></a></dt>
<dd><p>API Secret; defaults to <code>Sys.getenv("RECEPTIVITI_SECRET")</code>.</p></dd>


<dt id="arg-url">url<a class="anchor" aria-label="anchor" href="#arg-url"></a></dt>
<dd><p>API URL; defaults to <code>Sys.getenv("RECEPTIVITI_URL")</code>, which defaults to
<code>"https://api.receptiviti.com/"</code>.</p></dd>


<dt id="arg-version">version<a class="anchor" aria-label="anchor" href="#arg-version"></a></dt>
<dd><p>API version; defaults to <code>Sys.getenv("RECEPTIVITI_VERSION")</code>, which defaults to
<code>"v1"</code>.</p></dd>


<dt id="arg-endpoint">endpoint<a class="anchor" aria-label="anchor" href="#arg-endpoint"></a></dt>
<dd><p>API endpoint (path name after the version); defaults to <code>Sys.getenv("RECEPTIVITI_ENDPOINT")</code>,
which defaults to <code>"framework"</code>.</p></dd>


<dt id="arg-include-headers">include_headers<a class="anchor" aria-label="anchor" href="#arg-include-headers"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, <code>receptiviti_status</code>'s verbose message will include
the HTTP headers.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Nothing if <code>collect_results</code> is <code>FALSE</code>.
Otherwise, a <code>data.frame</code> with columns for <code>text</code> (if <code>return_text</code> is <code>TRUE</code>; the originally entered text),
<code>id</code> (if one was provided), <code>text_hash</code> (the MD5 hash of the text), a column each for relevant entries in <code>api_args</code>,
and scores from each included framework (e.g., <code>summary.word_count</code> and <code>liwc.i</code>). If <code>as_list</code> is <code>TRUE</code>,
returns a list with a named entry containing such a <code>data.frame</code> for each framework.</p>
    </div>
    <div class="section level2">
    <h2 id="request-process">Request Process<a class="anchor" aria-label="anchor" href="#request-process"></a></h2>


<p>This function (along with the internal <code>manage_request</code> function) handles texts and results in several steps:</p><ol><li><p>Prepare bundles (split <code>text</code> into &lt;= <code>bundle_size</code> and &lt;= <code>bundle_byte_limit</code> bundles).</p><ol><li><p>If <code>text</code> points to a directory or list of files, these will be read in later.</p></li>
<li><p>If <code>in_memory</code> is <code>FALSE</code>, bundles are written to a temporary location,
          and read back in when the request is made.</p></li>
</ol></li>
<li><p>Get scores for texts within each bundle.</p><ol><li><p>If texts are paths, or <code>in_memory</code> is <code>FALSE</code>, will load texts.</p></li>
<li><p>If <code>cache</code> is set, will skip any texts with cached scores.</p></li>
<li><p>If <code>request_cache</code> is <code>TRUE</code>, will check for a cached request.</p></li>
<li><p>If any texts need scoring and <code>make_request</code> is <code>TRUE</code>, will send unscored texts to the API.</p></li>
</ol></li>
<li><p>If a request was made and <code>request_cache</code> is set, will cache the response.</p></li>
<li><p>If <code>cache</code> is set, will write bundle scores to the cache.</p></li>
<li><p>After requests are made, if <code>cache</code> is set, will defragment the cache
        (combine bundle results within partitions).</p></li>
<li><p>If <code>collect_results</code> is <code>TRUE</code>, will prepare results:</p><ol><li><p>Will realign results with <code>text</code> (and <code>id</code> if provided).</p></li>
<li><p>If <code>output</code> is specified, will write realigned results to it.</p></li>
<li><p>Will drop additional columns (such as <code>custom</code> and <code>id</code> if not provided).</p></li>
<li><p>If <code>framework</code> is specified, will use it to select columns of the results.</p></li>
<li><p>Returns results.</p></li>
</ol></li>
</ol></div>
    <div class="section level2">
    <h2 id="cache">Cache<a class="anchor" aria-label="anchor" href="#cache"></a></h2>


<p>If the <code>cache</code> argument is specified, results for unique texts are saved in an
<a href="https://arrow.apache.org" class="external-link">Arrow</a> database in the cache location
(<code>Sys.getenv(</code><code>"RECEPTIVITI_CACHE")</code>), and are retrieved with subsequent requests.
This ensures that the exact same texts are not re-sent to the API.
This does, however, add some processing time and disc space usage.</p>
<p>If <code>cache</code> is <code>TRUE</code>, a default directory (<code>receptiviti_cache</code>) will be looked for
in the system's temporary directory (which is usually the parent of <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code>).
If this does not exist, you will be asked if it should be created.</p>
<p>The primary cache is checked when each bundle is processed, and existing results are loaded at
that time. When processing many bundles in parallel, and many results have been cached,
this can cause the system to freeze and potentially crash.
To avoid this, limit the number of cores, or disable parallel processing.</p>
<p>The <code>cache_format</code> arguments (or the <code>RECEPTIVITI_CACHE_FORMAT</code> environment variable) can be used to adjust the format of the cache.</p>
<p>You can use the cache independently with <code>open_database(Sys.getenv("RECEPTIVITI_CACHE"))</code>.</p>
<p>You can also set the <code>clear_cache</code> argument to <code>TRUE</code> to clear the cache before it is used again, which may be useful
if the cache has gotten big, or you know new results will be returned. Even if a cached result exists, it will be
reprocessed if it does not have all of the variables of new results, but this depends on there being at least 1 uncached
result. If, for instance, you add a framework to your account and want to reprocess a previously processed set of texts,
you would need to first clear the cache.</p>
<p>Either way, duplicated texts within the same call will only be sent once.</p>
<p>The <code>request_cache</code> argument controls a more temporary cache of each bundle request. This is cleared when the
R session ends. You might want to set this to <code>FALSE</code> if a new framework becomes available on your account
and you want to process a set of text you already processed in the current R session without restarting.</p>
<p>Another temporary cache is made when <code>in_memory</code> is <code>FALSE</code>, which is the default when processing
in parallel (when <code>cores</code> is over <code>1</code> or <code>use_future</code> is <code>TRUE</code>). This contains
a file for each unique bundle, which is read in as needed by the parallel workers.</p>
    </div>
    <div class="section level2">
    <h2 id="parallelization">Parallelization<a class="anchor" aria-label="anchor" href="#parallelization"></a></h2>


<p><code>text</code>s are split into bundles based on the <code>bundle_size</code> argument. Each bundle represents
a single request to the API, which is why they are limited to 1000 texts and a total size of 10 MB.
When there is more than one bundle and either <code>cores</code> is greater than 1 or <code>use_future</code> is <code>TRUE</code> (and you've
externally specified a <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></code>), bundles are processed by multiple cores.</p>
<p>If you have texts spread across multiple files, they can be most efficiently processed in parallel
if each file contains a single text (potentially collapsed from multiple lines). If files contain
multiple texts (i.e., <code>collapse_lines = FALSE</code>), then texts need to be read in before bundling
in order to ensure bundles are under the length limit.</p>
<p>Whether processing in serial or parallel, progress bars can be specified externally with
<code><a href="https://progressr.futureverse.org/reference/handlers.html" class="external-link">handlers</a></code>; see examples.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># check that the API is available, and your credentials work</span></span></span>
<span class="r-in"><span><span class="fu">receptiviti_status</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># score a single text</span></span></span>
<span class="r-in"><span><span class="va">single</span> <span class="op">&lt;-</span> <span class="fu">receptiviti</span><span class="op">(</span><span class="st">"a text to score"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># score multiple texts, and write results to a file</span></span></span>
<span class="r-in"><span><span class="va">multi</span> <span class="op">&lt;-</span> <span class="fu">receptiviti</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"first text to score"</span>, <span class="st">"second text"</span><span class="op">)</span>, <span class="st">"filename.csv"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># score many texts in separate files</span></span></span>
<span class="r-in"><span><span class="co">## defaults to look for .txt files</span></span></span>
<span class="r-in"><span><span class="va">file_results</span> <span class="op">&lt;-</span> <span class="fu">receptiviti</span><span class="op">(</span>dir <span class="op">=</span> <span class="st">"./path/to/txt_folder"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## could be .csv</span></span></span>
<span class="r-in"><span><span class="va">file_results</span> <span class="op">&lt;-</span> <span class="fu">receptiviti</span><span class="op">(</span></span></span>
<span class="r-in"><span>  dir <span class="op">=</span> <span class="st">"./path/to/csv_folder"</span>,</span></span>
<span class="r-in"><span>  text_column <span class="op">=</span> <span class="st">"text"</span>, file_type <span class="op">=</span> <span class="st">"csv"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># score many texts from a file, with a progress bar</span></span></span>
<span class="r-in"><span><span class="co">## set up cores and progress bar</span></span></span>
<span class="r-in"><span><span class="co">## (only necessary if you want the progress bar)</span></span></span>
<span class="r-in"><span><span class="fu">future</span><span class="fu">::</span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="st">"multisession"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">progressr</span><span class="fu">::</span><span class="fu"><a href="https://progressr.futureverse.org/reference/handlers.html" class="external-link">handlers</a></span><span class="op">(</span>global <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">progressr</span><span class="fu">::</span><span class="fu"><a href="https://progressr.futureverse.org/reference/handlers.html" class="external-link">handlers</a></span><span class="op">(</span><span class="st">"progress"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## make request</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">receptiviti</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"./path/to/largefile.csv"</span>,</span></span>
<span class="r-in"><span>  text_column <span class="op">=</span> <span class="st">"text"</span>, use_future <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Receptiviti Inc., Kent English, Micah Iserman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

